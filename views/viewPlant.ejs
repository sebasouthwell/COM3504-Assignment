<%- include('partials/header',{title: title,stylesheets: stylesheets, javascripts: javascripts, sighting:sighting}) %>
<input type="text" id="plantId" value="<%= sighting.id %>" hidden>
<div class="container pt-1 pb-1" onload="generateRoom()">
    <div class="row">
        <div class="pb-2 bg-light rounded">
            <div class="p-2 text-center">
                <h2 class="text-primary" id="sightingDate">Sighting on <%= new Date(sighting.dateTime).toString().substring(0,24) %> </h2>
            </div>
            <div>
                <div class="row" id="plantPhotoPhone">
                        <div class="p-2 rounded-top rounded-bottom bg-secondary-subtle col" style="width: fit-content">
                            <div class="text-center row">
                                <div class="col-9">
                                    <p class="text-success" style="font-size: 12px">Spread: <%= sighting.plantEstSpread %>cm<br><i class="bi bi-arrows text-success text-center"></i></p>
                                </div>
                                <div class="col-3"></div>
                            </div>
                            <div class="d-flex row justify-content-center">
                                <div class="col-9">
                                    <img class="rounded w-100" src="<%= sighting.photo %>"><br>
                                </div>
                                <div class="col-3 align-content-center">
                                    <div class="">
                                        <p class="d-flex text-success" style="font-size: 12px"><i class="bi bi-arrows-vertical text-success"></i>Height: <%= sighting.plantEstHeight %>cm</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>
                <div id="reverseRow" class="row p-3">
                    <div class="col pt-4 ps-lg-4">
                        <p class="text-success" id="sightingNick">Seen by: <%= sighting.userNickName %> </p>
                        <br>
                        <p class="text-success" id="sightingGiven">Name:  <%= sighting.givenName %></p>
                        <p class="text-success" id="sightingStatus">Status: <%= sighting.identificationStatus %></p>
                        <p class="text-success" id="sightingDesc">Description: <%= sighting.description %></p>
                        <br>
                        <p class="text-success" id="sightingLoc">Location: <%= sighting.lat.valueOf().toString() %>, <%= sighting.long.valueOf().toString() %></p>
                        <p class="text-success" id="sightingExposure">Sun exposure: <%= sighting.sunExposureLevel %>%</p>
                        <div class="d-flex row flex-row ">
                            <% if(sighting.hasSeeds){ %>
                                <div class="thumbnail me-2" id="sightingSeeds">
                                    <img src="/static/images/Seeds.png" alt="Has seeds" class="rounded thumbnail border border-3 border-black">
                                </div>
                            <% } %>
                            <% if(sighting.hasFruit){ %>
                                <div class="thumbnail mx-2" id="sightingFruits">
                                    <img src="/static/images/Fruits.png" class="rounded thumbnail border border-3 border-black">
                                </div>
                            <% } %>
                            <% if(sighting.hasFlowers){ %>
                                <div class="thumbnail mx-2" id="sightingFlower">
                                    <img src="/static/images/Flower.png" class="rounded thumbnail border border-3 border-black" style="<%= sighting.flowerColour ? "background-color: " + sighting.flowerColour + " !important;" : "" %>">
                                </div>
                            <% } %>

                        </div>
                    </div>
                    <div class="col" id="plantPhoto">
                        <div class="row">
                            <div class="col-2"></div>
                                <div class="rounded-top bg-secondary-subtle col-8">
                                    <div class="row">
                                        <div class="d-flex align-items-center col-4 justify-content-end pt-4">
                                            <p class="d-flex align-items-center text-success text-end">Height: <%= sighting.plantEstHeight %>cm<i class="bi bi-arrows-vertical text-success h1" ></i></p>
                                        </div>
                                        <div class="col-8 justify-content-center pt-4 pe-4">
                                            <img class="rounded w-100" src="<%= sighting.photo %>"><br>
                                        </div>
                                    </div>
                                </div>
                            <div class="col-2"></div>
                        </div>
                        <div class="row">
                            <div class="col-2"></div>
                                <div class="rounded-bottom bg-secondary-subtle col-8">
                                    <div class="row">
                                    <div class="col-4"></div>
                                    <div class="col-8 text-center pe-4">
                                        <i class="bi bi-arrows text-success h1 text-center"></i>
                                        <p class="text-success">Spread: <%= sighting.plantEstSpread %>cm</p>
                                    </div>
                                </div>
                            <div class="col-2"></div>
                        </div>
                    </div>
                    </div>
                </div>
                <div class="row p-3">
                    <div class="col-1"></div>
                    <div class="col-10 bg-secondary-subtle rounded text-center">
                    <h2>Comments</h2>
                        <div id="chat_interface" >
                            <div>
                                <div id="in_room" style="display: inline"></div>
                            </div>
                            <div class="boxed">
                                <div id="history" class="bg-white border-2 border-secondary">
                                </div>
                            </div>
                            <div id="input" class="bottom boxed rounded">
                                <form onsubmit="return false;" style="width: 100%">
                                    <p>
                                        <input type="text" id="chat_input" name="chat_input" style="width: 80%">
                                        <input type="text" id="plantId" value="<%= sighting.id %>" hidden>
                                        <button class="btn btn-primary" id="chat_send" onclick="sendChatText()">Send</button>
                                    </p>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<%- include('partials/footer') %>